<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: FlowerShape.js</title>
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"applicationName":"phina-extensions","default":{"outputSourceFiles":true}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">phina-extensions</a></h3>
    <button id="menuToggle" class="btn btn-link btn-lg menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
    </button>
    <div class="search">
        <input id="search" type="text" class="form-control input-md" placeholder="Search...">
    </div>
    <ul class="list">
    
        <li class="item" data-name="phina">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="phina.html">phina</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.accessory">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="phina.accessory.html">phina.accessory</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.display">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="phina.display.html">phina.display</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.game">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="phina.game.html">phina.game</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.ui">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                <a href="phina.ui.html">phina.ui</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="global">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-globe"></span>
                </span>
                
                <a href="global.html">Global</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            <span class="subtitle">Typedefs</span>
            
                <li class="parent" data-name="SceneItem"><a href="global.html#SceneItem">SceneItem</a></li>
            
                <li class="parent" data-name="StateObject"><a href="global.html#StateObject">StateObject</a></li>
            
                <li class="parent" data-name="Vector2"><a href="global.html#Vector2">Vector2</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  status-deprecated" data-name="_updatePosition"><a href="global.html#_updatePosition">_updatePosition</a></li>
            
                <li class="parent  " data-name="flowerPath"><a href="global.html#flowerPath">flowerPath</a></li>
            
                <li class="parent  " data-name="registerState"><a href="global.html#registerState">registerState</a></li>
            
                <li class="parent  " data-name="setState"><a href="global.html#setState">setState</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.accessory.AfterImage">
            <span class="title  ">
                
                <a href="phina.accessory.AfterImage.html">phina.accessory.AfterImage</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="phina.accessory.AfterImage#_toTexture"><a href="phina.accessory.AfterImage.html#_toTexture">_toTexture</a></li>
            
                <li class="parent  " data-name="phina.accessory.AfterImage#poolImage"><a href="phina.accessory.AfterImage.html#poolImage">poolImage</a></li>
            
                <li class="parent  " data-name="phina.accessory.AfterImage#remove"><a href="phina.accessory.AfterImage.html#remove">remove</a></li>
            
                <li class="parent  " data-name="phina.accessory.AfterImage#setVisible"><a href="phina.accessory.AfterImage.html#setVisible">setVisible</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.accessory.Automaton">
            <span class="title  ">
                
                <a href="phina.accessory.Automaton.html">phina.accessory.Automaton</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.accessory.Drawer">
            <span class="title  ">
                
                <a href="phina.accessory.Drawer.html">phina.accessory.Drawer</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="phina.accessory.Drawer#hide"><a href="phina.accessory.Drawer.html#hide">hide</a></li>
            
                <li class="parent  " data-name="phina.accessory.Drawer#show"><a href="phina.accessory.Drawer.html#show">show</a></li>
            
                <li class="parent  " data-name="phina.accessory.Drawer#toggle"><a href="phina.accessory.Drawer.html#toggle">toggle</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.accessory.Fader">
            <span class="title  ">
                
                <a href="phina.accessory.Fader.html">phina.accessory.Fader</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="phina.accessory.Fader#hide"><a href="phina.accessory.Fader.html#hide">hide</a></li>
            
                <li class="parent  " data-name="phina.accessory.Fader#pulse"><a href="phina.accessory.Fader.html#pulse">pulse</a></li>
            
                <li class="parent  " data-name="phina.accessory.Fader#show"><a href="phina.accessory.Fader.html#show">show</a></li>
            
                <li class="parent  " data-name="phina.accessory.Fader#toggle"><a href="phina.accessory.Fader.html#toggle">toggle</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.display.AnimationSprite">
            <span class="title  ">
                
                <a href="phina.display.AnimationSprite.html">phina.display.AnimationSprite</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="phina.display.AnimationSprite#setAnimation"><a href="phina.display.AnimationSprite.html#setAnimation">setAnimation</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.display.DashedLineShape">
            <span class="title  ">
                
                <a href="phina.display.DashedLineShape.html">phina.display.DashedLineShape</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.display.FlowerShape">
            <span class="title  ">
                
                <a href="phina.display.FlowerShape.html">phina.display.FlowerShape</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.display.PetalShape">
            <span class="title  ">
                
                <a href="phina.display.PetalShape.html">phina.display.PetalShape</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.display.ScrollLayer">
            <span class="title  ">
                
                <a href="phina.display.ScrollLayer.html">phina.display.ScrollLayer</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="phina.display.ScrollLayer#setCoordinate"><a href="phina.display.ScrollLayer.html#setCoordinate">setCoordinate</a></li>
            
                <li class="parent  " data-name="phina.display.ScrollLayer#setLock"><a href="phina.display.ScrollLayer.html#setLock">setLock</a></li>
            
                <li class="parent  " data-name="phina.display.ScrollLayer#setTarget"><a href="phina.display.ScrollLayer.html#setTarget">setTarget</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.display.TiledSprite">
            <span class="title  ">
                
                <a href="phina.display.TiledSprite.html">phina.display.TiledSprite</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="phina.display.TiledSprite#frameIndex"><a href="phina.display.TiledSprite.html#frameIndex">frameIndex</a></li>
            
                <li class="parent " data-name="phina.display.TiledSprite#image"><a href="phina.display.TiledSprite.html#image">image</a></li>
            
                <li class="parent " data-name="phina.display.TiledSprite#offsetX"><a href="phina.display.TiledSprite.html#offsetX">offsetX</a></li>
            
                <li class="parent " data-name="phina.display.TiledSprite#offsetY"><a href="phina.display.TiledSprite.html#offsetY">offsetY</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="phina.display.TiledSprite#setFrameIndex"><a href="phina.display.TiledSprite.html#setFrameIndex">setFrameIndex</a></li>
            
                <li class="parent  " data-name="phina.display.TiledSprite#setImage"><a href="phina.display.TiledSprite.html#setImage">setImage</a></li>
            
                <li class="parent  " data-name="phina.display.TiledSprite#setOffset"><a href="phina.display.TiledSprite.html#setOffset">setOffset</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.game.Sequence">
            <span class="title  ">
                
                <a href="phina.game.Sequence.html">phina.game.Sequence</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.ui.DebugLabel">
            <span class="title  ">
                
                <a href="phina.ui.DebugLabel.html">phina.ui.DebugLabel</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="phina.ui.DebugLabel#clear"><a href="phina.ui.DebugLabel.html#clear">clear</a></li>
            
                <li class="parent  " data-name="phina.ui.DebugLabel#subscribe"><a href="phina.ui.DebugLabel.html#subscribe">subscribe</a></li>
            
                <li class="parent  " data-name="phina.ui.DebugLabel#updateLabel"><a href="phina.ui.DebugLabel.html#updateLabel">updateLabel</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="phina.ui.ScrollableLabelArea">
            <span class="title  ">
                
                <a href="phina.ui.ScrollableLabelArea.html">phina.ui.ScrollableLabelArea</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="phina.ui.ScrollableLabelArea#canvasHeight"><a href="phina.ui.ScrollableLabelArea.html#canvasHeight">canvasHeight</a></li>
            
                <li class="parent " data-name="phina.ui.ScrollableLabelArea#textAreaHeight"><a href="phina.ui.ScrollableLabelArea.html#textAreaHeight">textAreaHeight</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="phina.ui.ScrollableLabelArea#addLine"><a href="phina.ui.ScrollableLabelArea.html#addLine">addLine</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="FlowerShape.js.html">Source: FlowerShape.js</h1>
        


    
    <section>
        <header>
            <div class="header content-size">
                <h2>FlowerShape.js</h2>
            </div>
        </header>
        <article>
            <pre id="source-code" class="prettyprint source "><code>
/**
 * 花描画path
 * thisはphina.graphics.Canvasインスタンス
 */
const flowerPath = function(x, y, radius, petalNum, petalWidth) {
  const degUnit = 360 / petalNum;
  const centerCircleRadius = radius * 0.12;
  const spr = radius * 0.2;
  const cpr = radius * 0.5;
  const tpr = radius;

  this.beginPath();

  // 中心円のパス
  this.circle(0, 0, centerCircleRadius).closePath();

  // 花弁のパス
  for (let i = 0; i &lt; petalNum; i++) {

    // 角度
    const degree = degUnit * i;
    const baseAngle = degree * Math.DEG_TO_RAD;
    const c1Angle = (degree - petalWidth) * Math.DEG_TO_RAD;
    const c2Angle = (degree + petalWidth) * Math.DEG_TO_RAD;

    // 方角
    const vx = Math.cos(baseAngle);
    const vy = Math.sin(baseAngle);

    // 開始点
    const sx = vx * spr;
    const sy = vy * spr;

    // 二次曲線 制御点その1（往路）
    const cp1x = Math.cos(c1Angle) * cpr;
    const cp1y = Math.sin(c1Angle) * cpr;

    // 先端
    const tx = vx * tpr;
    const ty = vy * tpr;

    // 二次曲線 制御点その2（復路）
    const cp2x = Math.cos(c2Angle) * cpr;
    const cp2y = Math.sin(c2Angle) * cpr;

    // 描画
    this.moveTo(sx, sy)
      .quadraticCurveTo(cp1x, cp1y, tx, ty)
      .quadraticCurveTo(cp2x, cp2y, sx, sy)
      .closePath();
  }
};

const DEFAULT_PARAMS = {
  backgroundColor: 'transparent',
  fill: '#F1DA03',
  radius: 128,
  petalNum: 22,
  petalWidth: 16,
  lineJoin: 'miter',
  miterLimit: 12,
}

/**
 * 花の形状のShape class
 * @class phina.display.FlowerShape
 * @memberOf phina.display
 * @extends phina.display.Shape
 *
 * @example
 * import {FlowerShape} from '@pentamania/phina-extensions'
 *
 * const flower = FlowerShape({
 *   radius: 60,
 *   petalNum: 24,
 *   petalWidth: 12,
 * }).addChildTo(this)
 *
 * @param {object} options - extends phina.display.Shape parameters
 * @param {number} [options.petalNum=22] - 花びらの数
 * @param {number} [options.petalWidth=16] - 花びらの幅
 */
export default phina.createClass({
    superClass: phina.display.Shape,

    init: function(options) {
      options = ({}).$safe(options, DEFAULT_PARAMS);
      this.superInit(options);
      this.petalNum = options.petalNum;
      this.petalWidth = options.petalWidth;
      this.miterLimit = options.miterLimit;
      this.setBoundingType('circle');
    },

    prerender: function(canvas) {
      canvas.miterLimit = this.miterLimit;
      flowerPath.call(canvas, 0, 0, this.radius, this.petalNum, this.petalWidth);
    },

    _defined: function() {
      phina.display.Shape.watchRenderProperty.call(this, 'miterLimit');
      phina.display.Shape.watchRenderProperty.call(this, 'petalNum');
      phina.display.Shape.watchRenderProperty.call(this, 'petalWidth');
    },

    _static: {
      defaults: DEFAULT_PARAMS,
    },

});
</code></pre>
        </article>
    </section>






        

        <footer class="content-size">
            <div class="footer">
                Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Mon Nov 25 2019 22:17:26 GMT+0900 (GMT+09:00)
            </div>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>
